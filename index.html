<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Comprar Picadas | Sabores del Fog칩n</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Meta Pixel -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init','2992234817833383');
fbq('track','PageView');
</script>

<style>
body{
  font-family:Arial,sans-serif;
  margin:0;
  background:#f6f6f6;
}
.container{
  max-width:900px;
  margin:auto;
  padding:20px;
}
h1,h2{text-align:center}
.card{
  background:#fff;
  padding:20px;
  border-radius:10px;
  margin-bottom:15px;
  border:3px solid transparent;
}
.card.selected{border-color:#c40000}
.sizes button{
  margin:5px;
  padding:12px;
  width:100%;
}
.sizes button.selected{
  background:#111;
  color:#fff;
}
input,select{
  width:100%;
  padding:14px;
  margin:10px 0;
}
.subtotal{
  background:#fff;
  padding:15px;
  border-radius:8px;
  margin-top:20px;
}
.pay button{
  width:100%;
  padding:18px;
  font-size:20px;
  background:#25D366;
  color:#fff;
  border:none;
  border-radius:10px;
  opacity:.5;
}
.pay button.enabled{
  opacity:1;
}
.note{
  font-size:14px;
  color:#555;
}
@media(min-width:700px){
  .sizes button{width:auto}
}
</style>
</head>

<body>
<div class="container">

<h1>Eleg칤 tu Picada</h1>
<p class="note">* Campos obligatorios</p>

<div class="card" onclick="selectModel('Cl치sica y Elegante',50000)">
<h2>游볙 Cl치sica y Elegante</h2>
<p>Quesos y embutidos premium.</p>
</div>

<div class="card" onclick="selectModel('Fresca y Colorida',50000)">
<h2>游 Fresca y Colorida</h2>
<p>Opciones frescas y equilibradas.</p>
</div>

<h2>쯇ara cu치ntas personas? *</h2>
<div class="sizes">
<button onclick="selectSize(4,50000)">4 personas</button>
<button onclick="selectSize(6,70000)">6 personas</button>
<button onclick="selectSize(8,90000)">8 personas</button>
</div>

<h2>Datos de env칤o *</h2>
<input id="address" placeholder="Direcci칩n y altura de env칤o" required>

<select id="zone" onchange="selectZone()" required>
<option value="">Seleccionar ciudad / zona</option>
<option value="Francisco 츼lvarez|0">Francisco 츼lvarez</option>
<option value="Moreno|0">Moreno</option>
<option value="Merlo|7000">Merlo</option>
<option value="Ituzaing칩|8000">Ituzaing칩</option>
<option value="Mor칩n|8000">Mor칩n</option>
<option value="CABA|8000">CABA</option>
</select>

<div class="subtotal" id="summary">
Complet치 los datos para ver el total.
</div>

<div class="pay">
<button id="payBtn" onclick="goWhatsApp()">IR A PAGAR</button>
</div>

</div>

<script>
let model=null,size=null,price=0,shipping=0;

function selectModel(m){
  model=m;
  document.querySelectorAll('.card').forEach(c=>c.classList.remove('selected'));
  event.currentTarget.classList.add('selected');
  fbq('track','AddToCart');
  update();
}

function selectSize(s,p){
  size=s;
  price=p;
  document.querySelectorAll('.sizes button').forEach(b=>b.classList.remove('selected'));
  event.currentTarget.classList.add('selected');
  update();
}

function selectZone(){
  const v=document.getElementById('zone').value;
  shipping=v?parseInt(v.split('|')[1]):0;
  update();
}

function update(){
  const addr=document.getElementById('address').value.trim();
  const zone=document.getElementById('zone').value;
  const btn=document.getElementById('payBtn');
  if(model && size && addr && zone){
    const z=zone.split('|')[0];
    const total=price+shipping;
    document.getElementById('summary').innerHTML=
    `Picada <strong>${model}</strong> para <strong>${size}</strong> personas<br>
    Env칤o a <strong>${z}</strong><br>
    <strong>Total: $${total.toLocaleString()}</strong><br>
    <small>Reserv치s con el 50%, el resto al recibir la picada.</small>`;
    btn.classList.add('enabled');
  }else{
    btn.classList.remove('enabled');
  }
}

document.querySelectorAll('input').forEach(i=>i.addEventListener('input',update));

function goWhatsApp(){
  if(!document.getElementById('payBtn').classList.contains('enabled'))return;
  const addr=document.getElementById('address').value;
  const z=document.getElementById('zone').value.split('|')[0];
  const total=price+shipping;
  fbq('track','Lead');
  const msg=`Hola, quiero comprar una picada ${model} para ${size} personas.
Direcci칩n de env칤o: ${addr}.
Zona: ${z}.
Total: $${total}.
쯄e pas치s la info para abonar la se침a del 50%?`;
  window.location.href="https://wa.me/5491123284020?text="+encodeURIComponent(msg);
}
</script>
</body>
</html>
