<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Sabores del Fog√≥n</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<!-- Meta Pixel -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}
(window, document,'script','https://connect.facebook.net/en_US/fbevents.js');
fbq('init','2992234817833383');
fbq('track','PageView');
</script>

<style>
:root{
  --bg:#0f0f0f;
  --card:#1b1b1b;
  --text:#cfcac2;
  --muted:#9a958d;
  --accent:#D3AE09;
}
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:var(--bg);
  color:var(--text);
}
.container{
  max-width:720px;
  margin:auto;
  padding:16px;
}

/* HEADER */
.header{
  display:flex;
  align-items:center;
  gap:14px;
  margin-bottom:14px;
}
.logo{width:54px}
.brand{
  font-size:15px;
  color:var(--muted);
}
.brand a{
  color:var(--muted);
  text-decoration:none;
}
.brand span{margin:0 6px;opacity:.6}

/* SECTIONS */
.section{
  background:var(--card);
  border-radius:12px;
  padding:16px;
  margin-bottom:16px;
}

label{
  display:block;
  font-size:14px;
  color:var(--muted);
  margin-bottom:6px;
}

.control{
  width:100%;
  padding:14px;
  background:#111;
  color:var(--text);
  border:1px solid #333;
  border-radius:8px;
  margin-bottom:10px;
  box-sizing:border-box;
}

button.control{cursor:pointer;text-align:left}
button.selected{
  border-color:var(--accent);
  background:rgba(211,174,9,.15);
}

/* TABS */
.tabs{
  display:flex;
  gap:6px;
  overflow-x:auto;
  margin-bottom:12px;
}
.tab{
  min-width:90px;
  padding:10px;
  text-align:center;
  background:#111;
  border-radius:8px;
  cursor:pointer;
}
.tab.active{
  background:var(--accent);
  color:#1b1b1b;
}

/* TOP */
.picada-top{
  display:flex;
  gap:16px;
  align-items:flex-start;
}

/* IMAGE */
.image-box{
  width:160px;
  height:160px;
  background:#000;
  border-radius:12px;
  overflow:hidden;
  flex-shrink:0;
  display:flex;
  align-items:center;
  justify-content:center;
  color:var(--muted);
  font-size:12px;
  text-align:center;
  cursor:pointer;
}
.image-box img{
  width:100%;
  height:100%;
  object-fit:cover;
}

/* MODEL */
.model-column{flex:1}
.model-info{
  font-size:14px;
  line-height:1.5;
  color:var(--muted);
  margin:8px 0 14px;
}
.model-info b{color:var(--text)}

.summary{font-size:15px;line-height:1.5}

/* PAY */
.pay button{
  width:100%;
  padding:18px;
  font-size:20px;
  background:var(--accent);
  border:none;
  border-radius:10px;
  color:#2a2a2a;
  opacity:.4;
}
.pay button.enabled{opacity:1}

.small{text-align:center;font-size:13px;color:var(--muted)}

/* MODAL */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:999;
}
.modal img{
  max-width:90%;
  max-height:80%;
  border-radius:12px;
}
.modal button{
  position:absolute;
  top:20px;
  right:20px;
  background:var(--accent);
  border:none;
  padding:10px 14px;
  border-radius:8px;
}
</style>
</head>

<body>

<div class="modal" id="imgModal" onclick="closeModal()">
  <button>Cerrar</button>
  <img id="modalImg">
</div>

<div class="container">

<div class="header">
  <img src="images/LOGO.png" class="logo">
  <div class="brand">
    <a href="https://www.instagram.com/saboresfogon.ar/" target="_blank">@saboresfogon.ar</a>
    <span>|</span> Hac√© tu pedido
  </div>
</div>

<div class="section">
<label>¬øCu√°ntas picadas quer√©s?</label>
<select id="qtySelect" class="control" onchange="handleQtySelect()">
  <option value="1">1 picada</option>
  <option value="2">2 picadas</option>
  <option value="3">3 picadas</option>
  <option value="4">4 picadas</option>
  <option value="5">5 picadas</option>
  <option value="more">Necesito m√°s picadas</option>
</select>
<input id="customQty" type="number" min="6" class="control"
placeholder="Ingres√° la cantidad"
style="display:none" onchange="setCustomQty()">
</div>

<div class="section" id="config"></div>

<div class="section">
<label>Direcci√≥n y altura de env√≠o</label>
<input id="addr" class="control"
placeholder="Por favor ingrese la direcci√≥n del env√≠o"
oninput="update()">

<label>Localidad</label>
<select id="zone" class="control" onchange="setZone()">
  <option value="">Seleccionar localidad</option>
  <option value="Francisco √Ålvarez|0">Francisco √Ålvarez</option>
  <option value="Moreno|0">Moreno</option>
  <option value="Merlo|7000">Merlo</option>
  <option value="Ituzaing√≥|8000">Ituzaing√≥</option>
  <option value="Mor√≥n|8000">Mor√≥n</option>
  <option value="CABA|8000">CABA</option>
</select>
</div>

<div class="section summary" id="summary">
Complet√° todos los pasos para poder ir a pagar.
</div>

<div class="pay">
<button id="payBtn" onclick="goWA()">IR A PAGAR</button>
</div>

<p class="small">Reserv√°s con el 50%. El resto se paga al recibir.</p>

</div>

<script>
const modelData={
 "Cl√°sica y Elegante":{
  img:"images/IMG_7762-min.JPG",
  fiambres:["Sopresatta italiana","Jam√≥n crudo","Lomo ahumado","Panceta ahumada"],
  quesos:["Brie","Queso azul","Pepato"],
  dips:["Dip dulce","Dip salado"]
 },
 "Fresca y Colorida":{
  img:"images/IMG_7761-min.JPG",
  fiambres:["Jam√≥n cocido","Salam√≠n chacarero","Longaniza","Panceta ahumada"],
  quesos:["Brie","Pategr√°s","Sardo"],
  dips:["Dip dulce","Dip salado"]
 }
};

let picadas=[],active=0,ship=0,zoneName="";

function handleQtySelect(){
 qtySelect.value==="more"
 ? customQty.style.display="block"
 : (customQty.style.display="none",buildPicadas(+qtySelect.value));
}
function setCustomQty(){buildPicadas(+customQty.value||1)}

function buildPicadas(n){
 picadas=Array.from({length:n},()=>({model:null,size:null,price:0}));
 active=0;
 renderConfig();
}

function renderConfig(){
 let tabs='<div class="tabs">';
 picadas.forEach((_,i)=>tabs+=`<div class="tab ${i===active?'active':''}" onclick="active=${i};renderConfig()">Picada ${i+1}</div>`);
 tabs+='</div>';

 const p=picadas[active];

 let imageHTML='<div class="image-box">Seleccion√°<br>un modelo</div>';
 if(p.model){
  imageHTML=`<div class="image-box" onclick="openModal('${modelData[p.model].img}')">
    <img src="${modelData[p.model].img}" loading="lazy">
  </div>`;
 }

 let info='Seleccion√° un modelo para ver su contenido.';
 if(p.model){
  const d=modelData[p.model];
  info=`<b>Incluye</b><br>
  <b>ü•© Fiambres</b><br>‚Ä¢ ${d.fiambres.join("<br>‚Ä¢ ")}<br><br>
  <b>üßÄ Quesos</b><br>‚Ä¢ ${d.quesos.join("<br>‚Ä¢ ")}<br><br>
  <b>ü•£ Dips</b><br>‚Ä¢ ${d.dips.join("<br>‚Ä¢ ")}`;
  if(p.size>=6) info+=`<br><br><b>‚ú® Extra</b><br>‚Ä¢ Tomatitos deshidratados`;
 }

 config.innerHTML=`
 ${tabs}
 <div class="picada-top">
   <div class="model-column">
     <label>Modelo de la picada</label>
     <button class="control ${p.model==='Cl√°sica y Elegante'?'selected':''}" onclick="setModel('Cl√°sica y Elegante')">Cl√°sica y Elegante</button>
     <button class="control ${p.model==='Fresca y Colorida'?'selected':''}" onclick="setModel('Fresca y Colorida')">Fresca y Colorida</button>
     <div class="model-info">${info}</div>
   </div>
   ${imageHTML}
 </div>

 <label>Cantidad de personas</label>
 <button class="control ${p.size===4?'selected':''}" onclick="setSize(4,50000)">4 personas ($50.000) ‚Äì 20√ó30 cm</button>
 <button class="control ${p.size===6?'selected':''}" onclick="setSize(6,70000)">6 personas ($70.000) ‚Äì 28√ó48 cm</button>
 <button class="control ${p.size===8?'selected':''}" onclick="setSize(8,90000)">8 personas ($90.000) ‚Äì 28√ó48 cm</button>
 `;
 update();
}

function setModel(m){picadas[active].model=m;renderConfig()}
function setSize(s,p){picadas[active].size=s;picadas[active].price=p;renderConfig()}
function setZone(){
 if(!zone.value)return;
 zoneName=zone.value.split('|')[0];
 ship=+zone.value.split('|')[1];
 update();
}

function update(){
 let total=ship,valid=addr.value&&zoneName;
 let txt='';
 picadas.forEach((p,i)=>{
  if(!p.model||!p.size) valid=false;
  total+=p.price;
  txt+=`Picada ${i+1}: ${p.model} (${p.size} personas)<br>`;
 });
 if(valid){
  summary.innerHTML=`${txt}<br>Env√≠o a ${addr.value}, ${zoneName}<br><b>Total $${total.toLocaleString()}</b>`;
  payBtn.classList.add('enabled');
 }else{
  payBtn.classList.remove('enabled');
  summary.innerHTML="Complet√° todos los pasos para poder ir a pagar.";
 }
}

function goWA() {
  if (!payBtn.classList.contains('enabled')) return;

  // Dispara el evento de compra a Meta
  fbq('track', 'Purchase', { value: total, currency: 'ARS' });

  // Construir mensaje
  let cantidadPicadas = picadas.length;
  let msg = `Hola, quiero pedir ${cantidadPicadas} picada${cantidadPicadas > 1 ? 's' : ''}:\n\n`;

  picadas.forEach((p, i) => {
    if (cantidadPicadas > 1) {
      msg += `Picada ${i + 1}:\n`;
    }
    msg += `Modelo: ${p.model}\n`;
    msg += `Cantidad de personas: ${p.size}\n\n`;
  });

  msg += `Mi direcci√≥n: ${addr.value}\n`;
  msg += `Localidad: ${zoneName}\n`;
  msg += `Mi pedido es de un total de $${total.toLocaleString()}\n`;
  msg += '¬øMe pasas la informaci√≥n de pago as√≠ reservo con el 50%?';

  // Redirige a WhatsApp con el mensaje codificado
  location.href = 'https://wa.me/5491123284020?text=' + encodeURIComponent(msg);
}


function openModal(src){
 modalImg.src=src;
 imgModal.style.display="flex";
}
function closeModal(){
 imgModal.style.display="none";
}

buildPicadas(1);
</script>

</body>
</html>
