<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Sabores del Fogón</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Meta Pixel -->
<script>
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init','2992234817833383');
fbq('track','PageView');
</script>

<style>
:root{
  --bg:#0f0f0f;
  --card:#1b1b1b;
  --text:#f1f1f1;
  --muted:#aaa;
  --accent:#c40000;
  --ok:#25D366;
}
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:var(--bg);
  color:var(--text);
}
.container{
  max-width:760px;
  margin:auto;
  padding:16px;
}
h1{
  text-align:center;
  margin-bottom:0;
}
h2{
  text-align:center;
  font-weight:normal;
  margin-top:4px;
  color:var(--muted);
}
.section{
  background:var(--card);
  border-radius:12px;
  padding:16px;
  margin-bottom:16px;
}
label{
  display:block;
  margin-bottom:6px;
  color:var(--muted);
}
input,select,button{
  width:100%;
  padding:14px;
  margin-top:8px;
  background:#111;
  color:var(--text);
  border:1px solid #333;
  border-radius:8px;
}
button.option{
  margin-top:6px;
}
button.selected{
  border-color:var(--accent);
  background:#260000;
}
.tabs{
  display:flex;
  gap:6px;
  margin-bottom:12px;
}
.tab{
  flex:1;
  text-align:center;
  padding:10px;
  background:#111;
  border-radius:8px;
  cursor:pointer;
}
.tab.active{
  background:var(--accent);
}
.summary{
  font-size:15px;
  line-height:1.5;
}
.pay button{
  background:var(--ok);
  font-size:20px;
  border:none;
  opacity:.4;
}
.pay button.enabled{
  opacity:1;
}
.small{
  font-size:13px;
  color:var(--muted);
  text-align:center;
}
</style>
</head>

<body>
<div class="container">

<h1>Sabores del Fogón</h1>
<h2>Hacé tu pedido</h2>

<div class="section">
<label>¿Cuántas picadas querés pedir?</label>
<input type="number" id="count" min="1" value="1" onchange="buildPicadas()">
</div>

<div class="section" id="picadas"></div>

<div class="section">
<label>Dirección y altura de envío</label>
<input id="addr" oninput="update()">

<label>Localidad</label>
<select id="zone" onchange="setZone()">
<option value="">Seleccionar</option>
<option value="Francisco Álvarez|0">Francisco Álvarez</option>
<option value="Moreno|0">Moreno</option>
<option value="Merlo|7000">Merlo</option>
<option value="Ituzaingó|8000">Ituzaingó</option>
<option value="Morón|8000">Morón</option>
<option value="Castelar|8000">Castelar</option>
<option value="Hurlingham|8000">Hurlingham</option>
<option value="San Miguel|8000">San Miguel</option>
<option value="Tres de Febrero|8000">Tres de Febrero</option>
<option value="La Matanza|8000">La Matanza</option>
<option value="General Rodríguez|8000">General Rodríguez</option>
<option value="Luján|8000">Luján</option>
<option value="CABA|8000">CABA</option>
</select>
</div>

<div class="section summary" id="summary">
Completá todos los pasos para ver el total.
</div>

<div class="pay">
<button id="payBtn" onclick="goWA()">IR A PAGAR</button>
</div>

<p class="small">Reservás con el 50%. El resto se paga al recibir.</p>

</div>

<script>
let picadas=[];
let shipping=0,zoneName='';

function buildPicadas(){
  const n=parseInt(document.getElementById('count').value)||1;
  picadas=[];
  for(let i=0;i<n;i++){
    picadas.push({model:null,size:null,price:0});
  }
  renderPicadas();
}

function renderPicadas(){
  const div=document.getElementById('picadas');
  div.innerHTML='';
  picadas.forEach((p,i)=>{
    div.innerHTML+=`
    <div class="section">
      <strong>Picada ${i+1}</strong>

      <button class="option" onclick="setModel(${i},'Clásica y Elegante')">Clásica y Elegante</button>
      <button class="option" onclick="setModel(${i},'Fresca y Colorida')">Fresca y Colorida</button>

      <button class="option" onclick="setSize(${i},4,50000)">4 personas</button>
      <button class="option" onclick="setSize(${i},6,70000)">6 personas</button>
      <button class="option" onclick="setSize(${i},8,90000)">8 personas</button>
    </div>`;
  });
  update();
}

function setModel(i,m){
  picadas[i].model=m;
  fbq('track','AddToCart');
  update();
}
function setSize(i,s,p){
  picadas[i].size=s;
  picadas[i].price=p;
  update();
}
function setZone(){
  const v=document.getElementById('zone').value;
  if(!v)return;
  zoneName=v.split('|')[0];
  shipping=parseInt(v.split('|')[1]);
  update();
}
function update(){
  const addr=document.getElementById('addr').value.trim();
  const btn=document.getElementById('payBtn');
  let valid=addr && zoneName;
  let total=shipping;
  let txt='';

  picadas.forEach((p,i)=>{
    if(!p.model||!p.size) valid=false;
    total+=p.price;
    txt+=`Picada ${i+1}: ${p.model} (${p.size} personas)\n`;
  });

  if(valid){
    document.getElementById('summary').innerHTML=
    txt.replace(/\n/g,'<br>')+
    `<br><br>Envío a ${zoneName}<br><strong>Total $${total.toLocaleString()}</strong>`;
    btn.classList.add('enabled');
  }else{
    btn.classList.remove('enabled');
  }
}

function goWA(){
  if(!document.getElementById('payBtn').classList.contains('enabled'))return;
  fbq('track','Lead');
  let msg='Hola, quiero hacer este pedido:\n';
  picadas.forEach((p,i)=>{
    msg+=`Picada ${i+1}: ${p.model} para ${p.size} personas.\n`;
  });
  msg+=`Dirección: ${addr.value}\nZona: ${zoneName}\n`;
  window.location.href='https://wa.me/5491123284020?text='+encodeURIComponent(msg);
}

buildPicadas();
</script>

</body>
</html>
