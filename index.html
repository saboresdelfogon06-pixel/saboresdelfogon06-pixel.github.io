<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Sabores del Fog√≥n</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<!-- Meta Pixel -->
<script>
if ('scrollRestoration' in history) {
  history.scrollRestoration = 'manual';
}
!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}
(window, document,'script','https://connect.facebook.net/en_US/fbevents.js');
fbq('init','2992234817833383');
fbq('track','PageView');
</script>
<style>
:root{
  --bg:#0f0f0f;
  --card:#1b1b1b;
  --text:#cfcac2;
  --muted:#9a958d;
  --accent:#D3AE09;
}
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:var(--bg);
  color:var(--text);
  visibility:hidden;
  touch-action: manipulation;
  overscroll-behavior: none;
/* ‚Üê clave: evita pantallazo al refrescar */
}
.container{
  max-width:720px;
  margin:auto;
  padding:16px;
}

/* HEADER */
.header{
  display:flex;
  align-items:center;
  gap:14px;
  margin-bottom:14px;
}
.logo{width:54px}
.brand{
  font-size:15px;
  color:var(--muted);
}
.brand a{
  color:var(--muted);
  text-decoration:none;
}
.brand span{margin:0 6px;opacity:.6}

/* SECTIONS */
.section{
  background:var(--card);
  border-radius:12px;
  padding:10px;
  margin-bottom:16px;
}

label{
  display:block;
  font-size:14px;
  color:var(--muted);
  margin-bottom:6px;
}

.control{
  width:100%;
  padding:14px;
  background:#111;
  color:var(--text);
  border:1px solid #333;
  border-radius:8px;
  margin-bottom:10px;
  box-sizing:border-box;
}

button.control{cursor:pointer;text-align:left}
button.selected{
  border-color:var(--accent);
  background:rgba(211,174,9,.15);
}

/* TABS */
.tabs{
  display:flex;
  gap:6px;
  overflow-x:auto;
  margin-bottom:12px;
}
.tab{
  min-width:90px;
  padding:10px;
  text-align:center;
  background:#111;
  border-radius:8px;
  cursor:pointer;
}
.tab.active{
  background:var(--accent);
  color:#1b1b1b;
}

/* TOP */
.picada-top{
  display:flex;
  gap:16px;
  align-items:flex-start;
}

/* IMAGE */
.image-box{
  width:160px;
  height:160px;
  background:#000;
  border-radius:12px;
  overflow:hidden;
  flex-shrink:0;
  display:flex;
  align-items:center;
  justify-content:center;
  color:var(--muted);
  font-size:12px;
  text-align:center;
  cursor:pointer;
}
.image-box img{
  width:100%;
  height:100%;
  object-fit:cover;
}

/* MODEL */
.model-column{flex:1}
.model-info{
  font-size:14px;
  line-height:1.5;
  color:var(--muted);
  margin:8px 0 14px;
}
.model-info b{color:var(--text)}

.summary{font-size:15px;line-height:1.5}

/* PAY */
.pay button{
  width:100%;
  padding:18px;
  font-size:20px;
  background:var(--accent);
  border:none;
  border-radius:10px;
  color:#2a2a2a;
  opacity:.4;
}
.pay button.enabled{opacity:1}

.small{text-align:center;font-size:13px;color:var(--muted)}

/* MODAL */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:999;
}
.modal img{
  max-width:90%;
  max-height:80%;
  border-radius:12px;
}
.modal button{
  position:absolute;
  top:20px;
  right:20px;
  background:var(--accent);
  border:none;
  padding:10px 14px;
  border-radius:8px;
}
.banner{
  width:100%;
  height:220px;
  border-radius:14px;
  overflow:hidden;
  position:relative;
  margin-bottom:16px;
  background:#000;
  touch-action:pan-y;
}

@media (max-width:480px){
  .banner{
    height:180px;
  }
}

.banner-track{
  display:flex;
  height:100%;
  transition:transform .6s ease;
}

.banner-slide{
  min-width:100%;
  height:100%;
}

.banner-slide img,
.banner-slide video{
  width:100%;
  height:100%;
  object-fit:cover;
}

.banner-model{
  position:absolute;
  top:12px;
  right:12px;
  padding:6px 12px;
  background:rgba(0,0,0,.35);
  backdrop-filter: blur(6px);
  color:#fff;
  font-size:13px;
  letter-spacing:.3px;
  border-radius:999px;
  font-weight:500;
  z-index:10;
}
.banner::after{
  content:"";
  position:absolute;
  inset:auto 0 0 0;
  height:60%;
  background:linear-gradient(
    to top,
    rgba(0,0,0,.45),
    rgba(0,0,0,.15),
    transparent
  );
  pointer-events:none;
  z-index:5;
}

.control.date{
  padding:10px;
}
#config .picada-top{
  margin-top:4px;
}
@media (max-width:480px){
  #config{
    margin-bottom:8px;
  }
}

/* ===============================
   MEJOR LEGIBILIDAD EN M√ìVIL
   estilo Instagram / Twitter
   =============================== */
@media (max-width:480px){

  body{
    font-size:14px;
  }

  .control,
  select.control,
  button.control{
    font-size:14px;
  }

  label{
    font-size:13px;
  }

  .summary{
    font-size:14px;
  }

  .pay button{
    font-size:18px;
  }
}

@keyframes blink-gold {
  0%, 100% { border-color: var(--accent); background: rgba(211,174,9,0.15); }
  50% { border-color: var(--accent); background: transparent; }
}

.model-hint {
  animation: blink-gold 0.8s ease-in-out 2; /* parpadea dos veces */
}

</style>


<div class="modal" id="imgModal" onclick="closeModal()">
  <button>Cerrar</button>
  <img id="modalImg">
</div>

<div class="container">

<div class="header">
  <img src="images/LOGO.png" class="logo">
  <div class="brand">
    <a href="https://www.instagram.com/saboresfogon.ar/" target="_blank">@saboresfogon.ar</a>
    <span>|</span> Hac√© tu pedido
  </div>
</div>
  <!-- ===== BANNER VISUAL ===== -->
<!-- ===== BANNER VISUAL ===== -->
<!-- ===== BANNER SUPERIOR ===== -->
<!-- ===== HERO BANNER ===== -->
<div class="banner" id="heroBanner">

  <div class="banner-track" id="bannerTrack"></div>

  <div class="banner-model" id="bannerModel">
    Cl√°sica y Elegante
  </div>

</div>


<div id="config"></div>
<label style="font-size:12px;">Completa tus datos para el env√≠o:</label>
<div class="section">
<label>Nombre y apellido</label>
<input id="clientName" class="control"
placeholder="Ingres√° tu nombre completo"
oninput="update()">

<label>Fecha del pedido</label>
<input
  id="orderDate"
  type="date"
  class="control date"
  placeholder="Por favor selecciona una fecha"
  oninput="update()">

<label>Direcci√≥n y altura de env√≠o</label>
<input id="addr" class="control"
placeholder="Por favor ingrese la direcci√≥n del env√≠o"
oninput="update()">

<label>Localidad</label>
<select id="zone" class="control" onchange="handleZoneChange()">
  <option value="">Seleccionar localidad</option>
  <option value="manual">Ingresar manualmente</option>

  <option value="Francisco √Ålvarez|0">Francisco √Ålvarez</option>
  <option value="La reja|0">La reja</option>
  <option value="Moreno|0">Moreno</option>

  <option value="Paso del Rey|5000">Paso del Rey</option>  
  <option value="General Rodr√≠guez|8000">General Rodr√≠guez</option>
  <option value="Merlo|8000">Merlo</option>
  <option value="Ituzaing√≥|8000">Ituzaing√≥</option>
  <option value="San Antonio de Padua|8000">San Antonio de Padua</option>
  <option value="Mor√≥n|8000">Mor√≥n</option>
  <option value="Castelar|8000">Castelar</option>
  <option value="Hurlingham|8000">Hurlingham</option>
  <option value="La Matanza|8000">La Matanza</option>
  <option value="Ramos Mej√≠a|8000">Ramos Mej√≠a</option>
  <option value="San Justo|8000">San Justo</option>

  <option value="San Miguel|8000">San Miguel</option>
  <option value="Vicente L√≥pez|8000">Vicente L√≥pez</option>
  <option value="Olivos|8000">Olivos</option>
  <option value="San Isidro|8000">San Isidro</option>
  <option value="Pilar|8000">Pilar</option>

  <option value="Ciudad Aut√≥noma de Buenos Aires (CABA)|8000">
    Ciudad Aut√≥noma de Buenos Aires (CABA)
  </option>

</select>

<input type="text" id="manualZone" class="control" placeholder="Ingres√° tu localidad" style="display:none;" oninput="setZoneManual()">

</div>

<div class="section summary" style="position:relative">


  <div id="summary">
    Complet√° todos los pasos para ver el total.
  </div>

</div>

<div class="pay">
<button id="payBtn" onclick="goWA()">IR A PAGAR</button>
</div>

<p class="small">Reserv√°s con el 50%. El resto se paga al recibir.</p>

</div>
<script>
// ===== M√ìDULO 1: FECHA DESDE MA√ëANA =====
document.addEventListener('DOMContentLoaded', () => {
  const dateInput = document.getElementById('orderDate');
  if (dateInput) {
    const today = new Date();
    dateInput.min = today.toISOString().split('T')[0];
  }
});

// ===== FIN M√ìDULO 1 =====

const modelData={
 "Cl√°sica y Elegante":{
  img:"images/IMG_7762-min.JPG",
  fiambres:["Sopresatta italiana","Jam√≥n crudo","Lomo ahumado","Panceta ahumada"],
  quesos:["Brie","Queso azul","Pepato"],
  dips:["Dip dulce","Dip salado"]
 },
 "Fresca y Colorida":{
  img:"images/IMG_7761-min.JPG",
  fiambres:["Jam√≥n cocido","Salam√≠n chacarero","Longaniza","Panceta ahumada"],
  quesos:["Brie","Pategr√°s","Sardo"],
  dips:["Dip dulce","Dip salado"]
 }
};

let picadas=[],active=0,ship=0,zoneName="", total=0;

  // ===== M√ìDULO 3: MEMORIA =====
// ===== M√ìDULO 3: MEMORIA =====
function saveState(){
  localStorage.setItem('picadas', JSON.stringify(picadas));
  localStorage.setItem('clientName', clientName.value);
  localStorage.setItem('orderDate', orderDate.value);
  localStorage.setItem('addr', addr.value);
  localStorage.setItem('zone', zone.value);
}

function loadState(){
  // üîπ Si venimos de un reset, no cargar nada
  if(localStorage.getItem('reset') === 'true'){
    localStorage.removeItem('reset');
    buildPicadas(1);
    return;
  }

  const savedPicadas = localStorage.getItem('picadas');
  if(savedPicadas){
    picadas = JSON.parse(savedPicadas);
  } else {
    buildPicadas(1);
    return;
  }

  clientName.value = localStorage.getItem('clientName') || "";
  orderDate.value = localStorage.getItem('orderDate') || "";
  addr.value = localStorage.getItem('addr') || "";

  const savedZone = localStorage.getItem('zone');

  if (savedZone !== null) {
    zone.value = savedZone;

    if (savedZone) {
      setZone();
    } else {
      zoneName = "";
      ship = 0;
    }
  }

  if(picadas[active]?.model){
    syncBannerWithModel(picadas[active].model);
  }

  renderConfig();

  const hint = document.getElementById('modelHint');
  if(hint && picadas[active]?.model){
    hint.style.color = '#9a958d';
  }
}

function buildPicadas(n){
  picadas = Array.from({ length: n }, () => ({
    model: null,
    size: null,
    price: 0
  }));
  active = 0;
  renderConfig();
}

function resetAll(){
  // 1. borrar estado guardado
  localStorage.removeItem('picadas');
  localStorage.removeItem('clientName');
  localStorage.removeItem('orderDate');
  localStorage.removeItem('addr');
  localStorage.removeItem('zone');
  localStorage.removeItem('scrollY');
  localStorage.setItem('reset', 'true'); // üîπ FLAG reset

  // 2. resetear variables
  ship = 0;
  zoneName = "";
  total = 0;
  active = 0;

  // 3. limpiar inputs
  clientName.value = "";
  orderDate.value = "";
  addr.value = "";
  zone.value = "";

  // 4. volver al estado inicial real
  buildPicadas(1);

 // 5. reset visual
showSlide(0, false);
clearTimeout(bannerTimer);                  // üîπ limpiar cualquier timer previo
bannerTimer = setTimeout(nextSlide, 5000); // üîπ reiniciar ciclo autom√°tico
summary.innerHTML = "Complet√° todos los pasos para poder ir a pagar.";
payBtn.classList.remove("enabled");


function setActivePicada(i){
  active = i;

  const m = picadas[active].model;
  if(m){
    syncBannerWithModel(m);
  }

  saveState();
  renderConfig();
}
function setModel(model){
  picadas[active].model = model;

  // sincroniza banner
  syncBannerWithModel(model);

  saveState();
  renderConfig();
}

function addPicada(){
  if(picadas.length >= 6) return;

  picadas.push({
    model: null,
    size: null,
    price: 0
  });

  active = picadas.length - 1;
  saveState();
  renderConfig();
}


function removePicada(){
  if(picadas.length <= 1) return;

  picadas.splice(active,1);

  if(active >= picadas.length){
    active = picadas.length - 1;
  }

  saveState();
  renderConfig();
}

function removeLastPicada(){
  if(picadas.length <= 1) return;

  picadas.pop();

  if(active >= picadas.length){
    active = picadas.length - 1;
  }

  syncBannerWithModel(picadas[active].model);
  saveState();
  renderConfig();
}


function renderConfig(){

let tabs = `
<div style="display:flex;gap:8px;">

  <!-- CANTIDAD -->
  <div style="flex:1;">
    <label style="font-size:12px;">Eleg√≠ la cantidad:</label>

    <div style="display:flex;align-items:center;gap:8px;">
      <button
        class="control"
        style="width:36px;padding:8px;text-align:center;"
        onclick="removeLastPicada()"
        ${picadas.length <= 1 ? 'disabled' : ''}>
        ‚àí
      </button>

      <div style="flex:1;text-align:center;font-size:16px;">
        ${picadas.length}
      </div>

      <button
        class="control"
        style="width:36px;padding:8px;text-align:center;"
        onclick="addPicada()">
        +
      </button>
    </div>
  </div>

  <!-- EDITAR -->
  <div style="flex:1;">
    <label>Editar</label>
    <select class="control" onchange="setActivePicada(Number(this.value))">
      ${picadas.map((_,i)=>`
        <option value="${i}" ${i===active?'selected':''}>
          Picada ${i+1}
        </option>
      `).join("")}
    </select>
  </div>

</div>
`;

 const p = picadas[active];

// üîπ NUEVO: reset color del aviso a gris si hay modelo
const hint = document.getElementById('modelHint');
if(hint){
  hint.style.color = p.model ? '#9a958d' : '#9a958d';
}


  config.innerHTML = `
    ${tabs}

    <div class="picada-top">
      <div class="model-column">

        <label>Seleccion√° el modelo de la picada:</label>

        <!-- BOTONES 50% / 50% -->
    <div style="display:flex;gap:8px;margin-bottom:8px; justify-content:center;">
  <button class="control ${p.model==='Cl√°sica y Elegante'?'selected':''}" 
          style="flex:1; text-align:center; display:flex; align-items:center; justify-content:center; padding:12px 0;" 
          onclick="setModel('Cl√°sica y Elegante')">
    Cl√°sica y Elegante
  </button>

  <button class="control ${p.model==='Fresca y Colorida'?'selected':''}" 
          style="flex:1; text-align:center; display:flex; align-items:center; justify-content:center; padding:12px 0;" 
          onclick="setModel('Fresca y Colorida')">
    Fresca y Colorida
  </button>
</div>

<!-- CONTENIDO DE LA PICADA -->
<div class="section model-info" style="margin-bottom:8px">
  ${
    !p.model
      ? `
       <div id="modelHint" style="
  text-align:center;
  color:#9a958d;
  font-size:14px;
  padding:12px 6px;
">
  üëâ Por favor, seleccion√° un modelo de tabla de picada para ver su contenido.
</div>
      `
      : `
<div style="display:flex; flex-wrap:wrap; gap:12px; justify-content:center; text-align:center;">
  <div style="flex:1 1 45%;">
    <b>ü•© Fiambres</b>
    <div>${modelData[p.model].fiambres.map(f => `‚Ä¢ ${f}`).join("<br>")}</div>
  </div>

  <div style="flex:1 1 45%;">
    <b>üßÄ Quesos</b>
    <div>${modelData[p.model].quesos.map(q => `‚Ä¢ ${q}`).join("<br>")}</div>
  </div>
</div>

<!-- NUEVO: DIP debajo -->
<div style="margin-top:8px; text-align:left;">
  <b>ü•£ Dips</b>
  <div>${modelData[p.model].dips.map(d => `‚Ä¢ ${d}`).join("<br>")}</div>
</div>

  ${
    p.size >= 6
      ? `<div style="flex:1 1 45%;">
          <b>‚ú® Extra</b>
          <div>‚Ä¢ Tomatitos deshidratados</div>
        </div>`
      : ""
  }
</div>


      `
  }
</div>

       <label>Seleccion√° la cantidad de personas:</label>

<button
  class="control size-btn ${p.size===4?'selected':''}"
  onclick="handleSizeClick(4,50000)">
  4 | Pican 6 ($50.000) ‚Äì Tabla 20√ó30 cm
</button>

<button
  class="control size-btn ${p.size===6?'selected':''}"
  onclick="handleSizeClick(6,70000)">
  6 | Pican 8 ($70.000) ‚Äì Tabla 28√ó48 cm
</button>

<button
  class="control size-btn ${p.size===8?'selected':''}"
  onclick="handleSizeClick(8,90000)">
  8 | Pican 12 ($90.000) ‚Äì Tabla 28√ó48 cm
</button>

      </div>
    </div>
  `;

  update();
}


function setSize(s,p){
  picadas[active].size = s;
  picadas[active].price = p;
  saveState(); // M√ìDULO 3.2
  renderConfig();
}

function handleSizeClick(s, p){
  const current = picadas[active];

if(!current.model){
  // 1. Parpadeo en botones de modelo
  const modelBtns = document.querySelectorAll('.picada-top > .model-column > div > button.control');
  modelBtns.forEach(btn=>{
    btn.classList.remove('model-hint'); // reinicia animaci√≥n
    void btn.offsetWidth;
    btn.classList.add('model-hint');
  });

  // 2. Cambiar color del aviso a blanco
  const hint = document.getElementById('modelHint');
  if(hint) hint.style.color = '#ffffff';

  return; // üö´ no selecciona tama√±o
}




  // ‚úÖ si hay modelo ‚Üí funciona normal
  setSize(s, p);
}

function handleZoneChange() {
  const zoneSelect = document.getElementById('zone');
  const manualInput = document.getElementById('manualZone');

  // üëâ Opci√≥n "Seleccionar localidad"
  if (zoneSelect.value === "") {
    manualInput.style.display = 'none';
    zoneName = "";
    ship = 0;
    saveState();
    update();
    return;
  }

  // üëâ Opci√≥n manual
  if (zoneSelect.value === 'manual') {
    manualInput.style.display = 'block';
    zoneName = "";
    ship = 0;
    saveState();
    update();
    return;
  }

  // üëâ Localidad normal
  manualInput.style.display = 'none';
  setZone();
}


function setZoneManual() {
  const manualInput = document.getElementById('manualZone');
  zoneName = manualInput.value;
  ship = 0;
  saveState();
  update();
}

  
function setZone(){
 if(!zone.value)return;
 zoneName = zone.value.split('|')[0];
 ship = +zone.value.split('|')[1];
 saveState(); // M√ìDULO 3.2
 update();
}

function update(){
  const p = picadas[active]; // picada activa
  const summaryDiv = document.querySelector('.section.summary');

  // üîí Ocultar el cuadro si no hay modelo o tama√±o
  if (!p.model || !p.size) {
    summaryDiv.style.display = 'none';
    payBtn.classList.remove("enabled");
    return;
  } else {
    summaryDiv.style.display = 'block';
  }

  // ===== CONTENIDO DEL RESUMEN =====
  total = 0; // actualizar variable global
  let txt = "";

  picadas.forEach((p, i) => {
    total += p.price || 0;
    txt += `Picada ${i + 1}: ${p.model} (${p.size} personas) ‚Äî $${(p.price||0).toLocaleString()}<br>`;
  });

  if (zoneName) {
    txt += `<br>Env√≠o a ${zoneName}: $${ship.toLocaleString()}<br>`;
    total += ship;
  } else {
    txt += `<br>Env√≠o: sin seleccionar<br>`;
  }

  const mostrarTotal = picadas.every(p => p.model && p.size && zoneName);
  if (mostrarTotal) {
    txt += `<br><b>Total hasta ahora: $${total.toLocaleString()}</b>`;
  }

  summary.innerHTML = `
    <button onclick="resetAll()"
      style="
        position:absolute;
        top:8px;
        right:8px;
        background:none;
        border:none;
        color:#9a958d;
        font-size:18px;
        cursor:pointer;
        z-index:2;
      ">
      ‚úï
    </button>

    <div style="
      padding-right:32px;
      word-wrap:break-word;
    ">
      ${txt}
    </div>
  `;

  // ===== VALIDACI√ìN FINAL (solo para pagar) =====
  const valid = p.model && p.size && clientName.value && orderDate.value && addr.value && zoneName;

  if (valid) {
    payBtn.classList.add("enabled");

    if (!window._checkoutTracked) {
      fbq('trackCustom', 'FormCompleted', {
        content_name: 'Formulario Picada Completo',
        content_category: 'Picadas',
        value: total,
        currency: 'ARS',
        num_items: picadas.length
      });
      window._checkoutTracked = true;
    }

  } else {
    payBtn.classList.remove("enabled");
    window._checkoutTracked = false;
  }

  saveState();
}


function resetAll(){
  // 1. borrar estado guardado
  localStorage.removeItem('picadas');
  localStorage.removeItem('clientName');
  localStorage.removeItem('orderDate');
  localStorage.removeItem('addr');
  localStorage.removeItem('zone');
  localStorage.removeItem('scrollY');

  // 2. resetear variables
  ship = 0;
  zoneName = "";
  total = 0;
  active = 0;

  // 3. limpiar inputs
  clientName.value = "";
  orderDate.value = "";
  addr.value = "";
  zone.value = "";

  // 4. volver al estado inicial real
  buildPicadas(1);

  // 5. reset visual
  showSlide(0, false);
  summary.innerHTML = "Complet√° todos los pasos para poder ir a pagar.";
  payBtn.classList.remove("enabled");
}


function goWA() {
  if (!payBtn.classList.contains('enabled')) return;

fbq('trackCustom', 'StartPayment', {
  content_name: 'Click Ir a Pagar',
  content_category: 'Picadas',
  value: total,
  currency: 'ARS',
  num_items: picadas.length
});


  let cantidadPicadas = picadas.length;

  let msg = `Hola soy ${clientName.value}, hice un pedido para el ${orderDate.value}.\n\n`;
  msg += `Pedido:\n`;

  picadas.forEach((p, i) => {
    msg += `‚Ä¢ Picada ${i + 1}: ${p.model}, para ${p.size} personas\n`;
  });

  msg += `\nEntrega:\n`;
  msg += `Direcci√≥n: ${addr.value}\n`;
  msg += `Localidad: ${zoneName}\n\n`;

  msg += `Total del pedido: $${total.toLocaleString()}\n\n`;
  msg += `¬øMe envi√°s la informaci√≥n de pago as√≠ reservo con el 50%?`;

  location.href =
    'https://wa.me/5491123284020?text=' + encodeURIComponent(msg);
}



function openModal(src){
 modalImg.src=src;
 imgModal.style.display="flex";
}
function closeModal(){
 imgModal.style.display="none";
}
function bannerIsLocked(){
  return !!picadas[active]?.model;
}

const bannerSlides = [
  {
    model: "Cl√°sica y Elegante",
    type: "image",
    src: "images/IMG_7762-min.JPG"
  },
  {
    model: "Fresca y Colorida",
    type: "image",
    src: "images/IMG_7761-min.JPG"
  }
  // ac√° despu√©s pod√©s agregar videos
];

let bannerIndex = 0;
let bannerFrozenModel = null;
let bannerTimer = null;
let startX = 0;
let currentX = 0;

const banner = document.getElementById("heroBanner");
const track = document.getElementById("bannerTrack");
const bannerModel = document.getElementById("bannerModel");

// construir slides
bannerSlides.forEach(s => {
  const slide = document.createElement("div");
  slide.className = "banner-slide";

  slide.innerHTML =
    s.type === "video"
      ? `<video src="${s.src}" muted playsinline></video>`
      : `<img src="${s.src}">`;

  track.appendChild(slide);
});

function showSlide(i, animate = true){
  bannerIndex = i;
  track.style.transition = animate ? "transform .6s ease" : "none";
  track.style.transform = `translateX(-${i * 100}%)`;

  const slide = bannerSlides[i];
  bannerModel.textContent = slide.model;

  clearTimeout(bannerTimer);

  if(!bannerIsLocked()){
    bannerTimer = setTimeout(nextSlide, 5000);
  }
}


function nextSlide(){
  if(bannerIsLocked()) return;
  showSlide((bannerIndex + 1) % bannerSlides.length);
}

banner.onclick = () => {
  const model = bannerSlides[bannerIndex].model;
  picadas[active].model = model;
  saveState();
  renderConfig();
};


banner.addEventListener("touchend", e => {
  const endX = e.changedTouches[0].clientX;
  const diff = endX - startX;

  if (Math.abs(diff) < 40) return;

  let newIndex;

  if (diff < 0) {
    // swipe izquierda ‚Üí siguiente
    newIndex = (bannerIndex + 1) % bannerSlides.length;
  } else {
    // swipe derecha ‚Üí anterior
    newIndex = (bannerIndex - 1 + bannerSlides.length) % bannerSlides.length;
  }

  showSlide(newIndex);

  const newModel = bannerSlides[newIndex].model;

  // üëâ SIN importar bloqueo: swipe selecciona modelo
  picadas[active].model = newModel;
  saveState();
  renderConfig();
});


function syncBannerWithModel(model){
  if(!model) return;

  const i = bannerSlides.findIndex(s => s.model === model);
  if(i >= 0) showSlide(i, false);
}


window.addEventListener('scroll', () => {
  localStorage.setItem('scrollY', window.scrollY);
});

loadState();
  
window.addEventListener('load', () => {
  const y = localStorage.getItem('scrollY');

  if (y !== null) {
    window.scrollTo(0, parseInt(y, 10));
  }

  // esperar 1 frame para asegurar layout final
  requestAnimationFrame(() => {
    document.body.style.visibility = 'visible';
  });
});

// üîí bloquear zoom por gesto (iOS / Safari)
document.addEventListener('gesturestart', e => e.preventDefault());
document.addEventListener('gesturechange', e => e.preventDefault());
document.addEventListener('gestureend', e => e.preventDefault());


</script>

</body>
</html>
